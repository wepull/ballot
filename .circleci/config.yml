# Use the latest 2.1 version of CircleCI pipeline process engine.
# See: https://circleci.com/docs/2.0/configuration-reference
version: 2.1
orbs:
  eaas-orb: roost-eaas-orb/eaas-orb@1.0.2
# Define a job to be invoked later in a workflow.
# See: https://circleci.com/docs/2.0/configuration-reference/#jobs
jobs:
  cluster-create:
    docker:
      - image: 'cimg/base:current'
    steps:
      - checkout
      - eaas-orb/create-cluster:
          email: support@zb.io
          instance_type: t2.small
  trigger-application:
    docker:
      - image: 'cimg/base:current'
    steps:
      - checkout
      - eaas-orb/trigger-eaas:
          application_name: orbtest
          auth_token: ROOST_AUTH_TOKEN
          pipeline_project_type: github
          roost_server: ROOST_SERVER
workflows:
  use-my-orb:
    jobs:
      - cluster-create
      - trigger-application
