# Use the latest 2.1 version of CircleCI pipeline process engine.
# See: https://circleci.com/docs/2.0/configuration-reference
version: 2.1
orbs:
  eaas-orb: roost-eaas-orb/eaas-orb@dev:ab8a16adc8b907db754401ea9e2efd556707b9e1
# Define a job to be invoked later in a workflow.
# See: https://circleci.com/docs/2.0/configuration-reference/#jobs
jobs:
  cluster-create:
    docker:
      - image: 'cimg/base:current'
    steps:
      - checkout
      - eaas-orb/create-cluster:
          email: support@zb.io
          roost_server: ROOST_SERVER
  trigger-application:
    docker:
      - image: 'cimg/base:current'
    steps:
      - checkout
      - eaas-orb/trigger-eaas:
          application_name: orbtest
workflows:
  use-my-orb:
    jobs:
      - cluster-create
      - trigger-application